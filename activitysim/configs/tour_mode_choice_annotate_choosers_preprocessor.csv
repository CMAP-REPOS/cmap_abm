Description,Target,Expression,
#,,,
local,_DF_IS_TOUR,'tour_type' in df.columns,
,number_of_participants,df.number_of_participants if _DF_IS_TOUR else 1,
,is_joint,(df.tour_category=='joint') if _DF_IS_TOUR else False,
treat tours as work if tour_type not yet decided,tour_type,"df.get('tour_type', default='work')",
#,,,
 local,_HAVE_PARENT_TOURS,'parent_tour_id' in df.columns,
,_parent_tour_mode,"reindex(tours.tour_mode, df.parent_tour_id) if _HAVE_PARENT_TOURS else ''",
,work_tour_is_drive,_parent_tour_mode == 'DRIVEALONE',
,work_tour_is_bike,_parent_tour_mode=='BIKE',
,work_tour_is_SOV,_parent_tour_mode == 'DRIVEALONE',
#,,,
,is_mandatory,(df.tour_category=='mandatory') if 'tour_category' in df.columns else False,
,is_joint,(df.tour_category=='joint') if 'tour_category' in df.columns else False,
,is_indiv,~is_joint,
,is_atwork_subtour,(df.tour_category=='atwork') if 'tour_category' in df.columns else False,
,is_escort,(df.tour_type == 'escort') if _DF_IS_TOUR else False,
#,,,
# TODO,dest_topology,"reindex(land_use.TOPOLOGY, df[dest_col_name])",
,dest_topology,1,
,terminal_time,"reindex(land_use.TERMINAL, df[dest_col_name])",
,dest_density_index,"reindex(land_use.density_index, df[dest_col_name])",
# RIDEHAIL,,,
,origin_density_measure,"(reindex(land_use.TOTPOP, df[orig_col_name]) + reindex(land_use.TOTEMP, df[orig_col_name])) / (reindex(land_use.acres.clip(lower=1), df[orig_col_name]) / 640)",
,dest_density_measure,"(reindex(land_use.TOTPOP, df[dest_col_name]) + reindex(land_use.TOTEMP, df[dest_col_name])) / (reindex(land_use.acres.clip(lower=1), df[dest_col_name]) / 640)",
,origin_density,"pd.cut(origin_density_measure, bins=[-np.inf, 500, 2000, 5000, 15000, np.inf], labels=[5, 4, 3, 2, 1]).astype(int)",
,dest_density,"pd.cut(dest_density_measure, bins=[-np.inf, 500, 2000, 5000, 15000, np.inf], labels=[5, 4, 3, 2, 1]).astype(int)",
,origin_zone_taxi_wait_time_mean,"origin_density.map({k: v for k, v in Taxi_waitTime_mean.items()})",
,origin_zone_taxi_wait_time_sd,"origin_density.map({k: v for k, v in Taxi_waitTime_sd.items()})",
,dest_zone_taxi_wait_time_mean,"dest_density.map({k: v for k, v in Taxi_waitTime_mean.items()})",
,dest_zone_taxi_wait_time_sd,"dest_density.map({k: v for k, v in Taxi_waitTime_sd.items()})",
# ,, Note that the mean and standard deviation are not the values for the distribution itself, but of the underlying normal distribution it is derived from
,origTaxiWaitTime,"rng.lognormal_for_df(df, mu=origin_zone_taxi_wait_time_mean, sigma=origin_zone_taxi_wait_time_sd, broadcast=True, scale=True).clip(min_waitTime, max_waitTime)",
,destTaxiWaitTime,"rng.lognormal_for_df(df, mu=dest_zone_taxi_wait_time_mean, sigma=dest_zone_taxi_wait_time_sd, broadcast=True, scale=True).clip(min_waitTime, max_waitTime)",
,origin_zone_singleTNC_wait_time_mean,"origin_density.map({k: v for k, v in TNC_single_waitTime_mean.items()})",
,origin_zone_singleTNC_wait_time_sd,"origin_density.map({k: v for k, v in TNC_single_waitTime_sd.items()})",
,dest_zone_singleTNC_wait_time_mean,"dest_density.map({k: v for k, v in TNC_single_waitTime_mean.items()})",
,dest_zone_singleTNC_wait_time_sd,"dest_density.map({k: v for k, v in TNC_single_waitTime_sd.items()})",
,origSingleTNCWaitTime,"rng.lognormal_for_df(df, mu=origin_zone_singleTNC_wait_time_mean, sigma=origin_zone_singleTNC_wait_time_sd, broadcast=True, scale=True).clip(min_waitTime, max_waitTime)",
,destSingleTNCWaitTime,"rng.lognormal_for_df(df, mu=dest_zone_singleTNC_wait_time_mean, sigma=dest_zone_singleTNC_wait_time_sd, broadcast=True, scale=True).clip(min_waitTime, max_waitTime)",
,origin_zone_sharedTNC_wait_time_mean,"origin_density.map({k: v for k, v in TNC_shared_waitTime_mean.items()})",
,origin_zone_sharedTNC_wait_time_sd,"origin_density.map({k: v for k, v in TNC_shared_waitTime_sd.items()})",
,dest_zone_sharedTNC_wait_time_mean,"dest_density.map({k: v for k, v in TNC_shared_waitTime_mean.items()})",
,dest_zone_sharedTNC_wait_time_sd,"dest_density.map({k: v for k, v in TNC_shared_waitTime_sd.items()})",
,origSharedTNCWaitTime,"rng.lognormal_for_df(df, mu=origin_zone_sharedTNC_wait_time_mean, sigma=origin_zone_sharedTNC_wait_time_sd, broadcast=True, scale=True).clip(min_waitTime, max_waitTime)",
,destSharedTNCWaitTime,"rng.lognormal_for_df(df, mu=dest_zone_sharedTNC_wait_time_mean, sigma=dest_zone_sharedTNC_wait_time_sd, broadcast=True, scale=True).clip(min_waitTime, max_waitTime)",
,totalWaitTaxi,origTaxiWaitTime + destTaxiWaitTime,
,totalWaitSingleTNC,origSingleTNCWaitTime + destSingleTNCWaitTime,
,totalWaitSharedTNC,origSharedTNCWaitTime + destSharedTNCWaitTime,
#,,,
,_free_parking_available,(df.tour_type == 'work') & df.free_parking_at_work if _DF_IS_TOUR else False,
,_dest_hourly_peak_parking_cost,"reindex(land_use.PRKCST, df[dest_col_name]) * 100",
,_dest_hourly_offpeak_parking_cost,"reindex(land_use.PRKCST, df[dest_col_name]) * 100",
,_hourly_peak_parking_cost,"np.where(_free_parking_available, 0, _dest_hourly_peak_parking_cost)",
,_hourly_offpeak_parking_cost,"np.where(_free_parking_available, 0, _dest_hourly_offpeak_parking_cost)",
,daily_parking_cost,"np.where(is_mandatory, _hourly_peak_parking_cost, _hourly_offpeak_parking_cost) * np.minimum(df.duration / 2, 8)",
# cost coef,,,
,income_exponent,"np.where(tour_type == 'work', 0.5, 0.5)",
,c_cost,"coef_inc_adj_cost / (np.maximum(df.income,1000)**income_exponent)",
# ivt coef,,,
,time_factor,"np.where(tour_type=='work', df.time_factor_work, df.time_factor_nonwork)",
,c_ivt,coef_ivt * time_factor,
#,,,
,vot_da,c_ivt / c_cost * 0.6,
,vot_s2,vot_da / cost_share_s2,
,vot_s3,vot_da / cost_share_s3,
,vot_trn,c_ivt / c_cost * 0.6,
,_vot_bin_da,"np.where(vot_da < vot_threshold_low, 1, np.where(vot_da < vot_threshold_med, 2, 3))",
,_vot_bin_s2,"np.where(vot_s2 < vot_threshold_low, 1, np.where(vot_s2 < vot_threshold_med, 2, 3))",
,_vot_bin_s3,"np.where(vot_s3 < vot_threshold_low, 1, np.where(vot_s3 < vot_threshold_med, 2, 3))",
,_vot_bin_trn,"np.where(vot_trn < vot_threshold_low, 1, np.where(vot_trn < vot_threshold_med, 2, 3))",
#,ownsTransponder,df.transponderOwnership,
Transponder ownership model not implemented,ownsTransponder,1,
# vot-indexed skims,,,
DA skim based on Transponder ownership,da_dist_skims_out,"(np.where(ownsTransponder==1, odt_skims['SOV_TR_L_DIST'], odt_skims['SOV_NT_L_DIST']) * (_vot_bin_da == 1)) + (np.where(ownsTransponder==1, odt_skims['SOV_TR_M_DIST'], odt_skims['SOV_NT_M_DIST']) * (_vot_bin_da == 2)) + (np.where(ownsTransponder==1, odt_skims['SOV_TR_H_DIST'], odt_skims['SOV_NT_H_DIST']) * (_vot_bin_da == 3))",
,da_dist_skims_inb,"(np.where(ownsTransponder==1, dot_skims['SOV_TR_L_DIST'], dot_skims['SOV_NT_L_DIST']) * (_vot_bin_da == 1)) + (np.where(ownsTransponder==1, dot_skims['SOV_TR_M_DIST'], dot_skims['SOV_NT_M_DIST']) * (_vot_bin_da == 2)) + (np.where(ownsTransponder==1, dot_skims['SOV_TR_H_DIST'], dot_skims['SOV_NT_H_DIST']) * (_vot_bin_da == 3))",
,da_cost_skims_out,"(np.where(ownsTransponder==1, odt_skims['SOV_TR_L_TOLLCOST'], odt_skims['SOV_NT_L_TOLLCOST']) * (_vot_bin_da == 1)) + (np.where(ownsTransponder==1, odt_skims['SOV_TR_M_TOLLCOST'], odt_skims['SOV_NT_M_TOLLCOST']) * (_vot_bin_da == 2)) + (np.where(ownsTransponder==1, odt_skims['SOV_TR_H_TOLLCOST'], odt_skims['SOV_NT_H_TOLLCOST']) * (_vot_bin_da == 3))",
,da_cost_skims_inb,"(np.where(ownsTransponder==1, dot_skims['SOV_TR_L_TOLLCOST'], dot_skims['SOV_NT_L_TOLLCOST']) * (_vot_bin_da == 1)) + (np.where(ownsTransponder==1, dot_skims['SOV_TR_M_TOLLCOST'], dot_skims['SOV_NT_M_TOLLCOST']) * (_vot_bin_da == 2)) + (np.where(ownsTransponder==1, dot_skims['SOV_TR_H_TOLLCOST'], dot_skims['SOV_NT_H_TOLLCOST']) * (_vot_bin_da == 3))",
,da_time_skims_out,"(np.where(ownsTransponder==1, odt_skims['SOV_TR_L_TIME'], odt_skims['SOV_NT_L_TIME']) * (_vot_bin_da == 1)) + (np.where(ownsTransponder==1, odt_skims['SOV_TR_M_TIME'], odt_skims['SOV_NT_M_TIME']) * (_vot_bin_da == 2)) + (np.where(ownsTransponder==1, odt_skims['SOV_TR_H_TIME'], odt_skims['SOV_NT_H_TIME']) * (_vot_bin_da == 3))",
,da_time_skims_inb,"(np.where(ownsTransponder==1, dot_skims['SOV_TR_L_TIME'], dot_skims['SOV_NT_L_TIME']) * (_vot_bin_da == 1)) + (np.where(ownsTransponder==1, dot_skims['SOV_TR_M_TIME'], dot_skims['SOV_NT_M_TIME']) * (_vot_bin_da == 2)) + (np.where(ownsTransponder==1, dot_skims['SOV_TR_H_TIME'], dot_skims['SOV_NT_H_TIME']) * (_vot_bin_da == 3))",
,s2_dist_skims_out,(((odt_skims['HOV2_L_DIST']) * (_vot_bin_s2 == 1)) + ((odt_skims['HOV2_M_DIST']) * (_vot_bin_s2 == 2)) + ((odt_skims['HOV2_H_DIST']) * (_vot_bin_s2 == 3))),
,s2_dist_skims_inb,(((dot_skims['HOV2_L_DIST']) * (_vot_bin_s2 == 1)) + ((dot_skims['HOV2_M_DIST']) * (_vot_bin_s2 == 2)) + ((dot_skims['HOV2_H_DIST']) * (_vot_bin_s2 == 3))),
,s2_cost_skims_out,(((odt_skims['HOV2_L_TOLLCOST']) * (_vot_bin_s2 == 1)) + ((odt_skims['HOV2_M_TOLLCOST']) * (_vot_bin_s2 == 2)) + ((odt_skims['HOV2_H_TOLLCOST']) * (_vot_bin_s2 == 3))),
,s2_cost_skims_inb,(((dot_skims['HOV2_L_TOLLCOST']) * (_vot_bin_s2 == 1)) + ((dot_skims['HOV2_M_TOLLCOST']) * (_vot_bin_s2 == 2)) + ((dot_skims['HOV2_H_TOLLCOST']) * (_vot_bin_s2 == 3))),
,s2_time_skims_out,(((odt_skims['HOV2_L_TIME']) * (_vot_bin_s2 == 1)) + ((odt_skims['HOV2_M_TIME']) * (_vot_bin_s2 == 2)) + ((odt_skims['HOV2_H_TIME']) * (_vot_bin_s2 == 3))),
,s2_time_skims_inb,(((dot_skims['HOV2_L_TIME']) * (_vot_bin_s2 == 1)) + ((dot_skims['HOV2_M_TIME']) * (_vot_bin_s2 == 2)) + ((dot_skims['HOV2_H_TIME']) * (_vot_bin_s2 == 3))),
,s3_dist_skims_out,(((odt_skims['HOV3_L_DIST']) * (_vot_bin_s3 == 1)) + ((odt_skims['HOV3_M_DIST']) * (_vot_bin_s3 == 2)) + ((odt_skims['HOV3_H_DIST']) * (_vot_bin_s3 == 3))),
,s3_dist_skims_inb,(((dot_skims['HOV3_L_DIST']) * (_vot_bin_s3 == 1)) + ((dot_skims['HOV3_M_DIST']) * (_vot_bin_s3 == 2)) + ((dot_skims['HOV3_H_DIST']) * (_vot_bin_s3 == 3))),
,s3_cost_skims_out,(((odt_skims['HOV3_L_TOLLCOST']) * (_vot_bin_s3 == 1)) + ((odt_skims['HOV3_M_TOLLCOST']) * (_vot_bin_s3 == 2)) + ((odt_skims['HOV3_H_TOLLCOST']) * (_vot_bin_s3 == 3))),
,s3_cost_skims_inb,(((dot_skims['HOV3_L_TOLLCOST']) * (_vot_bin_s3 == 1)) + ((dot_skims['HOV3_M_TOLLCOST']) * (_vot_bin_s3 == 2)) + ((dot_skims['HOV3_H_TOLLCOST']) * (_vot_bin_s3 == 3))),
,s3_time_skims_out,(((odt_skims['HOV3_L_TIME']) * (_vot_bin_s3 == 1)) + ((odt_skims['HOV3_M_TIME']) * (_vot_bin_s3 == 2)) + ((odt_skims['HOV3_H_TIME']) * (_vot_bin_s3 == 3))),
,s3_time_skims_inb,(((dot_skims['HOV3_L_TIME']) * (_vot_bin_s3 == 1)) + ((dot_skims['HOV3_M_TIME']) * (_vot_bin_s3 == 2)) + ((dot_skims['HOV3_H_TIME']) * (_vot_bin_s3 == 3))),
# ,,,
Determining Tour Origin,origin,df.origin if 'origin' in df.columns else df.home_zone_id if 'home_zone_id' in df.columns else df.workplace_zone_id,
Determining Tour Destination,destination,df.destination if 'destination' in df.columns else df.alt_dest,
walk transit ivt by transit mode,wt_ctabusloc_ivt_skims_out,(((odt_skims['CTABUSLOCIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CTABUSLOCIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CTABUSLOCIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_ctabusloc_ivt_skims_inb,(((dot_skims['CTABUSLOCIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CTABUSLOCIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CTABUSLOCIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_pacebusloc_ivt_skims_out,(((odt_skims['PACEBUSLOCIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['PACEBUSLOCIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['PACEBUSLOCIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_pacebusloc_ivt_skims_inb,(((dot_skims['PACEBUSLOCIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['PACEBUSLOCIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['PACEBUSLOCIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_busloc_ivt_skims_out,wt_ctabusloc_ivt_skims_out + wt_pacebusloc_ivt_skims_out,
,wt_busloc_ivt_skims_inb,wt_ctabusloc_ivt_skims_inb + wt_pacebusloc_ivt_skims_inb,
,wt_busexp_ivt_skims_out,(((odt_skims['BUSEXPIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['BUSEXPIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['BUSEXPIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_busexp_ivt_skims_inb,(((dot_skims['BUSEXPIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['BUSEXPIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['BUSEXPIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_ctarail_ivt_skims_out,(((odt_skims['CTARAILIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CTARAILIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CTARAILIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_ctarail_ivt_skims_inb,(((dot_skims['CTARAILIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CTARAILIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CTARAILIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_metrarail_ivt_skims_out,(((odt_skims['METRARAILIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['METRARAILIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['METRARAILIVTT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_metrarail_ivt_skims_inb,(((dot_skims['METRARAILIVTT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['METRARAILIVTT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['METRARAILIVTT_WALK_H']) * (_vot_bin_trn == 3))),
pnr transit ivt by transit mode,pt_ctabusloc_ivt_skims_out,(((odt_skims['CTABUSLOCIVTT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CTABUSLOCIVTT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CTABUSLOCIVTT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_ctabusloc_ivt_skims_inb,(((dot_skims['CTABUSLOCIVTT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CTABUSLOCIVTT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CTABUSLOCIVTT_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_pacebusloc_ivt_skims_out,(((odt_skims['PACEBUSLOCIVTT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['PACEBUSLOCIVTT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['PACEBUSLOCIVTT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_pacebusloc_ivt_skims_inb,(((dot_skims['PACEBUSLOCIVTT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['PACEBUSLOCIVTT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['PACEBUSLOCIVTT_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_busloc_ivt_skims_out,pt_ctabusloc_ivt_skims_out + pt_pacebusloc_ivt_skims_out,
,pt_busloc_ivt_skims_inb,pt_ctabusloc_ivt_skims_inb + pt_pacebusloc_ivt_skims_inb,
,pt_busexp_ivt_skims_out,(((odt_skims['BUSEXPIVTT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['BUSEXPIVTT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['BUSEXPIVTT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_busexp_ivt_skims_inb,(((dot_skims['BUSEXPIVTT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['BUSEXPIVTT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['BUSEXPIVTT_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_ctarail_ivt_skims_out,(((odt_skims['CTARAILIVTT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CTARAILIVTT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CTARAILIVTT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_ctarail_ivt_skims_inb,(((dot_skims['CTARAILIVTT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CTARAILIVTT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CTARAILIVTT_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_metrarail_ivt_skims_out,(((odt_skims['METRARAILIVTT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['METRARAILIVTT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['METRARAILIVTT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_metrarail_ivt_skims_inb,(((dot_skims['METRARAILIVTT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['METRARAILIVTT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['METRARAILIVTT_PNRIN_H']) * (_vot_bin_trn == 3))),
knr transit ivt by transit mode,kt_ctabusloc_ivt_skims_out,(((odt_skims['CTABUSLOCIVTT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CTABUSLOCIVTT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CTABUSLOCIVTT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_ctabusloc_ivt_skims_inb,(((dot_skims['CTABUSLOCIVTT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CTABUSLOCIVTT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CTABUSLOCIVTT_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_pacebusloc_ivt_skims_out,(((odt_skims['PACEBUSLOCIVTT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['PACEBUSLOCIVTT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['PACEBUSLOCIVTT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_pacebusloc_ivt_skims_inb,(((dot_skims['PACEBUSLOCIVTT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['PACEBUSLOCIVTT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['PACEBUSLOCIVTT_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_busloc_ivt_skims_out,kt_ctabusloc_ivt_skims_out + kt_pacebusloc_ivt_skims_out,
,kt_busloc_ivt_skims_inb,kt_ctabusloc_ivt_skims_inb + kt_pacebusloc_ivt_skims_inb,
,kt_busexp_ivt_skims_out,(((odt_skims['BUSEXPIVTT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['BUSEXPIVTT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['BUSEXPIVTT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_busexp_ivt_skims_inb,(((dot_skims['BUSEXPIVTT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['BUSEXPIVTT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['BUSEXPIVTT_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_ctarail_ivt_skims_out,(((odt_skims['CTARAILIVTT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CTARAILIVTT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CTARAILIVTT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_ctarail_ivt_skims_inb,(((dot_skims['CTARAILIVTT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CTARAILIVTT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CTARAILIVTT_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_metrarail_ivt_skims_out,(((odt_skims['METRARAILIVTT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['METRARAILIVTT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['METRARAILIVTT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_metrarail_ivt_skims_inb,(((dot_skims['METRARAILIVTT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['METRARAILIVTT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['METRARAILIVTT_KNRIN_H']) * (_vot_bin_trn == 3))),
# walk transit,,,
,wt_ivt_skims_out,wt_busloc_ivt_skims_out + wt_busexp_ivt_skims_out + wt_ctarail_ivt_skims_out + wt_metrarail_ivt_skims_out,
,wt_ivt_skims_inb,wt_busloc_ivt_skims_inb + wt_busexp_ivt_skims_inb + wt_ctarail_ivt_skims_inb + wt_metrarail_ivt_skims_inb,
,wt_iwait_skims_out,(((odt_skims['FIRSTWAIT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['FIRSTWAIT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['FIRSTWAIT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_iwait_skims_inb,(((dot_skims['FIRSTWAIT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['FIRSTWAIT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['FIRSTWAIT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_xwait_skims_out,(((odt_skims['XFERWAIT_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERWAIT_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERWAIT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_xwait_skims_inb,(((dot_skims['XFERWAIT_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERWAIT_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERWAIT_WALK_H']) * (_vot_bin_trn == 3))),
,wt_xfers_skims_out,(((odt_skims['XFERS_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERS_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERS_WALK_H']) * (_vot_bin_trn == 3))),
,wt_xfers_skims_inb,(((dot_skims['XFERS_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERS_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERS_WALK_H']) * (_vot_bin_trn == 3))),
#,wt_wacc_skims_out,(((odt_skims['ACC_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['ACC_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['ACC_WALK_H']) * (_vot_bin_trn == 3))),
#,wt_wacc_skims_inb,(((dot_skims['ACC_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['ACC_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['ACC_WALK_H']) * (_vot_bin_trn == 3))),
,wt_waux_skims_out,(((odt_skims['XFERWALK_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERWALK_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERWALK_WALK_H']) * (_vot_bin_trn == 3))),
,wt_waux_skims_inb,(((dot_skims['XFERWALK_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERWALK_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERWALK_WALK_H']) * (_vot_bin_trn == 3))),
#,wt_wegr_skims_out,(((odt_skims['EGR_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['EGR_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['EGR_WALK_H']) * (_vot_bin_trn == 3))),
#,wt_wegr_skims_inb,(((dot_skims['EGR_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['EGR_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['EGR_WALK_H']) * (_vot_bin_trn == 3))),
,wt_fare_skims_out,(((odt_skims['FARE_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['FARE_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['FARE_WALK_H']) * (_vot_bin_trn == 3))),
,wt_fare_skims_inb,(((dot_skims['FARE_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['FARE_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['FARE_WALK_H']) * (_vot_bin_trn == 3))),
,wt_crowd_skims_out,(((odt_skims['CROWD_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CROWD_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CROWD_WALK_H']) * (_vot_bin_trn == 3))),
,wt_crowd_skims_inb,(((dot_skims['CROWD_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CROWD_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CROWD_WALK_H']) * (_vot_bin_trn == 3))),
,wt_cappen_skims_out,(((odt_skims['CAPPEN_WALK_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CAPPEN_WALK_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CAPPEN_WALK_H']) * (_vot_bin_trn == 3))),
,wt_cappen_skims_inb,(((dot_skims['CAPPEN_WALK_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CAPPEN_WALK_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CAPPEN_WALK_H']) * (_vot_bin_trn == 3))),
# park-and-ride transit,,,
,pt_ivt_skims_out,pt_busloc_ivt_skims_out + pt_busexp_ivt_skims_out + pt_ctarail_ivt_skims_out + pt_metrarail_ivt_skims_out,
,pt_ivt_skims_inb,pt_busloc_ivt_skims_inb + pt_busexp_ivt_skims_inb + pt_ctarail_ivt_skims_inb + pt_metrarail_ivt_skims_inb,
,pt_iwait_skims_out,(((odt_skims['FIRSTWAIT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['FIRSTWAIT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['FIRSTWAIT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_iwait_skims_inb,(((dot_skims['FIRSTWAIT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['FIRSTWAIT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['FIRSTWAIT_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_xwait_skims_out,(((odt_skims['XFERWAIT_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERWAIT_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERWAIT_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_xwait_skims_inb,(((dot_skims['XFERWAIT_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERWAIT_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERWAIT_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_xfers_skims_out,(((odt_skims['XFERS_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERS_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERS_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_xfers_skims_inb,(((dot_skims['XFERS_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERS_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERS_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_dacc_skims_out,(((odt_skims['ACC_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['ACC_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['ACC_PNROUT_H']) * (_vot_bin_trn == 3))),
#,pt_wacc_skims_inb,(((dot_skims['ACC_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['ACC_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['ACC_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_waux_skims_out,(((odt_skims['XFERWALK_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERWALK_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERWALK_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_waux_skims_inb,(((dot_skims['XFERWALK_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERWALK_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERWALK_PNRIN_H']) * (_vot_bin_trn == 3))),
#,pt_wegr_skims_out,(((odt_skims['EGR_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['EGR_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['EGR_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_degr_skims_inb,(((dot_skims['EGR_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['EGR_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['EGR_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_fare_skims_out,(((odt_skims['FARE_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['FARE_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['FARE_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_fare_skims_inb,(((dot_skims['FARE_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['FARE_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['FARE_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_crowd_skims_out,(((odt_skims['CROWD_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CROWD_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CROWD_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_crowd_skims_inb,(((dot_skims['CROWD_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CROWD_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CROWD_PNRIN_H']) * (_vot_bin_trn == 3))),
,pt_cappen_skims_out,(((odt_skims['CAPPEN_PNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CAPPEN_PNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CAPPEN_PNROUT_H']) * (_vot_bin_trn == 3))),
,pt_cappen_skims_inb,(((dot_skims['CAPPEN_PNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CAPPEN_PNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CAPPEN_PNRIN_H']) * (_vot_bin_trn == 3))),
# kiss-and-ride transit,,,
,kt_ivt_skims_out,kt_busloc_ivt_skims_out + kt_busexp_ivt_skims_out + kt_ctarail_ivt_skims_out + kt_metrarail_ivt_skims_out,
,kt_ivt_skims_inb,kt_busloc_ivt_skims_inb + kt_busexp_ivt_skims_inb + kt_ctarail_ivt_skims_inb + kt_metrarail_ivt_skims_inb,
,kt_iwait_skims_out,(((odt_skims['FIRSTWAIT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['FIRSTWAIT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['FIRSTWAIT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_iwait_skims_inb,(((dot_skims['FIRSTWAIT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['FIRSTWAIT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['FIRSTWAIT_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_xwait_skims_out,(((odt_skims['XFERWAIT_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERWAIT_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERWAIT_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_xwait_skims_inb,(((dot_skims['XFERWAIT_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERWAIT_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERWAIT_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_xfers_skims_out,(((odt_skims['XFERS_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERS_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERS_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_xfers_skims_inb,(((dot_skims['XFERS_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERS_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERS_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_dacc_skims_out,(((odt_skims['ACC_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['ACC_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['ACC_KNROUT_H']) * (_vot_bin_trn == 3))),
#,kt_wacc_skims_inb,(((dot_skims['ACC_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['ACC_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['ACC_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_waux_skims_out,(((odt_skims['XFERWALK_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['XFERWALK_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['XFERWALK_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_waux_skims_inb,(((dot_skims['XFERWALK_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['XFERWALK_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['XFERWALK_KNRIN_H']) * (_vot_bin_trn == 3))),
#,kt_wegr_skims_out,(((odt_skims['EGR_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['EGR_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['EGR_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_degr_skims_inb,(((dot_skims['EGR_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['EGR_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['EGR_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_fare_skims_out,(((odt_skims['FARE_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['FARE_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['FARE_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_fare_skims_inb,(((dot_skims['FARE_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['FARE_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['FARE_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_crowd_skims_out,(((odt_skims['CROWD_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CROWD_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CROWD_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_crowd_skims_inb,(((dot_skims['CROWD_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CROWD_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CROWD_KNRIN_H']) * (_vot_bin_trn == 3))),
,kt_cappen_skims_out,(((odt_skims['CAPPEN_KNROUT_L']) * (_vot_bin_trn == 1)) + ((odt_skims['CAPPEN_KNROUT_M']) * (_vot_bin_trn == 2)) + ((odt_skims['CAPPEN_KNROUT_H']) * (_vot_bin_trn == 3))),
,kt_cappen_skims_inb,(((dot_skims['CAPPEN_KNRIN_L']) * (_vot_bin_trn == 1)) + ((dot_skims['CAPPEN_KNRIN_M']) * (_vot_bin_trn == 2)) + ((dot_skims['CAPPEN_KNRIN_H']) * (_vot_bin_trn == 3))),
# Access egress time,,,
walk time by transit mode,origin_busloc_time,"reindex(land_use.walk_dist_local_bus, origin)*60/walkSpeed",
,origin_busexp_time,"reindex(land_use.walk_dist_express_bus, origin)*60/walkSpeed",
,origin_ctarail_time,"reindex(land_use.walk_dist_cta_rail, origin)*60/walkSpeed",
,origin_metrarail_time,"reindex(land_use.walk_dist_metra_rail, origin)*60/walkSpeed",
,dest_busloc_time,"reindex(land_use.walk_dist_local_bus, destination)*60/walkSpeed",
,dest_busexp_time,"reindex(land_use.walk_dist_express_bus, destination)*60/walkSpeed",
,dest_ctarail_time,"reindex(land_use.walk_dist_cta_rail, destination)*60/walkSpeed",
,dest_metrarail_time,"reindex(land_use.walk_dist_metra_rail, destination)*60/walkSpeed",
"walk transit, origin to closest stop, outbound",wt_wacc_time_out,"np.minimum.reduce([np.where(wt_busloc_ivt_skims_out>0,origin_busloc_time,9999),np.where(wt_busexp_ivt_skims_out>0,origin_busexp_time,9999),np.where(wt_ctarail_ivt_skims_out>0,origin_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_out>0,origin_metrarail_time,9999)])",
"walk transit, closest stop to destnation, outbound",wt_wegr_time_out,"np.minimum.reduce([np.where(wt_busloc_ivt_skims_out>0,dest_busloc_time,9999),np.where(wt_busexp_ivt_skims_out>0,dest_busexp_time,9999),np.where(wt_ctarail_ivt_skims_out>0,dest_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_out>0,dest_metrarail_time,9999)])",
"walk transit, origin to closest stop, inbound",wt_wacc_time_inb,"np.minimum.reduce([np.where(wt_busloc_ivt_skims_inb>0,origin_busloc_time,9999),np.where(wt_busexp_ivt_skims_inb>0,origin_busexp_time,9999),np.where(wt_ctarail_ivt_skims_inb>0,origin_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_inb>0,origin_metrarail_time,9999)])",
"walk transit, closest stop to destnation, inbound",wt_wegr_time_inb,"np.minimum.reduce([np.where(wt_busloc_ivt_skims_inb>0,dest_busloc_time,9999),np.where(wt_busexp_ivt_skims_inb>0,dest_busexp_time,9999),np.where(wt_ctarail_ivt_skims_inb>0,dest_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_inb>0,dest_metrarail_time,9999)])",
"pnr transit, closest stop to destnation, outbound",pt_wegr_time_out,"np.minimum.reduce([np.where(pt_busloc_ivt_skims_out>0,dest_busloc_time,9999),np.where(pt_busexp_ivt_skims_out>0,dest_busexp_time,9999),np.where(pt_ctarail_ivt_skims_out>0,dest_ctarail_time,9999),np.where(pt_metrarail_ivt_skims_out>0,dest_metrarail_time,9999)])",
"pnr transit, origin to closest stop, inbound",pt_wacc_time_inb,"np.minimum.reduce([np.where(pt_busloc_ivt_skims_inb>0,origin_busloc_time,9999),np.where(pt_busexp_ivt_skims_inb>0,origin_busexp_time,9999),np.where(pt_ctarail_ivt_skims_inb>0,origin_ctarail_time,9999),np.where(pt_metrarail_ivt_skims_inb>0,origin_metrarail_time,9999)])",
"knr transit, closest stop to destnation, outbound",kt_wegr_time_out,"np.minimum.reduce([np.where(kt_busloc_ivt_skims_out>0,dest_busloc_time,9999),np.where(kt_busexp_ivt_skims_out>0,dest_busexp_time,9999),np.where(kt_ctarail_ivt_skims_out>0,dest_ctarail_time,9999),np.where(kt_metrarail_ivt_skims_out>0,dest_metrarail_time,9999)])",
"knr transit, origin to closest stop, inbound",kt_wacc_time_inb,"np.minimum.reduce([np.where(kt_busloc_ivt_skims_inb>0,origin_busloc_time,9999),np.where(kt_busexp_ivt_skims_inb>0,origin_busexp_time,9999),np.where(kt_ctarail_ivt_skims_inb>0,origin_ctarail_time,9999),np.where(kt_metrarail_ivt_skims_inb>0,origin_metrarail_time,9999)])",
#"walk transit, origin to closest stop, outbound",wt_wacc_time_out,"np.minimum(np.minimum(np.where(wt_busloc_ivt_skims_out>0,origin_busloc_time,9999),np.where(wt_busexp_ivt_skims_out>0,origin_busexp_time,9999)),np.minimum(np.where(wt_ctarail_ivt_skims_out>0,origin_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_out>0,origin_metrarail_time,9999)))",
#"walk transit, closest stop to destnation, outbound",wt_wegr_time_out,"np.minimum(np.minimum(np.where(wt_busloc_ivt_skims_out>0,dest_busloc_time,9999),np.where(wt_busexp_ivt_skims_out>0,dest_busexp_time,9999)),np.minimum(np.where(wt_ctarail_ivt_skims_out>0,dest_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_out>0,dest_metrarail_time,9999)))",
#"walk transit, origin to closest stop, inbound",wt_wacc_time_inb,"np.minimum(np.minimum(np.where(wt_busloc_ivt_skims_inb>0,origin_busloc_time,9999),np.where(wt_busexp_ivt_skims_inb>0,origin_busexp_time,9999)),np.minimum(np.where(wt_ctarail_ivt_skims_inb>0,origin_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_inb>0,origin_metrarail_time,9999)))",
#"walk transit, closest stop to destnation, inbound",wt_wegr_time_inb,"np.minimum(np.minimum(np.where(wt_busloc_ivt_skims_inb>0,dest_busloc_time,9999),np.where(wt_busexp_ivt_skims_inb>0,dest_busexp_time,9999)),np.minimum(np.where(wt_ctarail_ivt_skims_inb>0,dest_ctarail_time,9999),np.where(wt_metrarail_ivt_skims_inb>0,dest_metrarail_time,9999)))",
#"pnr transit, closest stop to destnation, outbound",pt_wegr_time_out,"np.minimum(np.minimum(np.where(pt_busloc_ivt_skims_out>0,dest_busloc_time,9999),np.where(pt_busexp_ivt_skims_out>0,dest_busexp_time,9999)),np.minimum(np.where(pt_ctarail_ivt_skims_out>0,dest_ctarail_time,9999),np.where(pt_metrarail_ivt_skims_out>0,dest_metrarail_time,9999)))",
#"pnr transit, origin to closest stop, inbound",pt_wacc_time_inb,"np.minimum(np.minimum(np.where(pt_busloc_ivt_skims_inb>0,origin_busloc_time,9999),np.where(pt_busexp_ivt_skims_inb>0,origin_busexp_time,9999)),np.minimum(np.where(pt_ctarail_ivt_skims_inb>0,origin_ctarail_time,9999),np.where(pt_metrarail_ivt_skims_inb>0,origin_metrarail_time,9999)))",
#"knr transit, closest stop to destnation, outbound",kt_wegr_time_out,"np.minimum(np.minimum(np.where(kt_busloc_ivt_skims_out>0,dest_busloc_time,9999),np.where(kt_busexp_ivt_skims_out>0,dest_busexp_time,9999)),np.minimum(np.where(kt_ctarail_ivt_skims_out>0,dest_ctarail_time,9999),np.where(kt_metrarail_ivt_skims_out>0,dest_metrarail_time,9999)))",
#"knr transit, origin to closest stop, inbound",kt_wacc_time_inb,"np.minimum(np.minimum(np.where(kt_busloc_ivt_skims_inb>0,origin_busloc_time,9999),np.where(kt_busexp_ivt_skims_inb>0,origin_busexp_time,9999)),np.minimum(np.where(kt_ctarail_ivt_skims_inb>0,origin_ctarail_time,9999),np.where(kt_metrarail_ivt_skims_inb>0,origin_metrarail_time,9999)))",
#,,,
,sov_available,(da_time_skims_out>0) & (da_time_skims_inb>0),
,hov2_available,(s2_time_skims_out>0) & (s2_time_skims_inb>0),
,hov3_available,(s3_time_skims_out>0) & (s3_time_skims_inb>0),
,walk_transit_available,(wt_wacc_time_out + wt_wegr_time_out + wt_wacc_time_inb + wt_wegr_time_inb < 9999) & (wt_ivt_skims_out > 0) & (wt_ivt_skims_inb > 0),
,pnr_transit_available,(pt_wegr_time_out + pt_wacc_time_inb < 9999) & (pt_ivt_skims_out > 0) & (pt_ivt_skims_inb > 0),
,knr_transit_available,(kt_wegr_time_out + kt_wacc_time_inb < 9999) & (kt_ivt_skims_out > 0) & (kt_ivt_skims_inb > 0),
,tnc_transit_available,(kt_wegr_time_out + kt_wacc_time_inb < 9999) & (kt_ivt_skims_out > 0) & (kt_ivt_skims_inb > 0),
destination in central business district,destination_in_cbd,"(reindex(land_use.areatype, df[dest_col_name]) < cbd_threshold) * 1",
origin in Chicago,origin_in_chicago,"(reindex(land_use.TAZ, df[orig_col_name]) <= chicago_threshold) * 1",
destination in Chicago,destination_in_chicago,"(reindex(land_use.TAZ, df[dest_col_name]) < chicago_threshold) * 1",
#School Busses,,,
,schbus_available,(df.tour_type == 'school' if _DF_IS_TOUR else False) & (df.is_student) & (df.age >= 5) & (df.age < 16),
